---
import BaseLayout from './BaseLayout.astro';

interface RelatedPost {
  slug: string;
  title: string;
  image: string | null;
  date?: Date;
  category?: string | null;
  excerpt?: string;
  readingTime?: number;
}

interface NavPost {
  slug: string;
  title: string;
}

interface Props {
  title: string;
  description?: string;
  date?: Date;
  image?: string;
  tags?: string[];
  relatedPosts?: RelatedPost[];
  readingTime?: number;
  prevPost?: NavPost | null;
  nextPost?: NavPost | null;
  faqSchema?: { question: string; answer: string }[];
}

const { title, description, date, image, tags = [], relatedPosts = [], readingTime, prevPost, nextPost, faqSchema } = Astro.props;
---

<BaseLayout
  title={title}
  description={description}
  image={image}
  type="article"
  publishedDate={date}
  tags={tags}
  breadcrumbs={[
    { name: 'Ìôà', url: '/' },
    { name: 'Î∏îÎ°úÍ∑∏', url: '/posts/' },
    { name: title, url: Astro.url.pathname },
  ]}
  faqSchema={faqSchema}
>
  <!-- ÏùΩÍ∏∞ ÏßÑÌñâÎ•† Î∞î -->
  <div id="reading-progress" class="fixed top-0 left-0 h-[3px] bg-brand z-50 transition-none" style="width:0%"></div>

  <article class="py-12 md:py-20">
    <div class="max-w-6xl mx-auto px-4 sm:px-6">
      <!-- Breadcrumb -->
      <nav class="mb-6 text-sm text-gray-400" aria-label="breadcrumb">
        <ol class="flex items-center gap-1.5 flex-wrap">
          <li><a href="/" class="hover:text-brand transition-colors">Ìôà</a></li>
          <li class="before:content-['/'] before:mx-1.5 before:text-gray-300"><a href="/posts/" class="hover:text-brand transition-colors">Î∏îÎ°úÍ∑∏</a></li>
          <li class="before:content-['/'] before:mx-1.5 before:text-gray-300 text-gray-600 font-medium truncate max-w-[280px] sm:max-w-none">{title}</li>
        </ol>
      </nav>

      <!-- Ìó§Îçî -->
      <header class="mb-10 pb-8 border-b border-gray-200 max-w-3xl">
        {tags.length > 0 && (
          <div class="flex flex-wrap gap-2 mb-4">
            {tags.slice(0, 4).map((tag) => (
              <span class="bg-brand-bg text-brand text-xs font-semibold px-3 py-1 rounded-full">{tag}</span>
            ))}
          </div>
        )}
        <h1 class="text-2xl md:text-3xl font-extrabold text-gray-900 mb-4 leading-tight">{title}</h1>
        <div class="flex items-center gap-3">
          <a href="/about/" class="shrink-0">
            <img src="/img/avatar.png" alt="ÏÑúÏö∏ÎåÄ Ïú§ÏõêÏû•" class="w-7 h-7 rounded-full object-cover ring-2 ring-brand-bg hover:ring-brand transition-all" />
          </a>
          <div class="flex items-center gap-3 text-sm text-gray-400">
            <a href="/about/" class="font-medium text-gray-600 hover:text-brand transition-colors">ÏÑúÏö∏ÎåÄ Ïú§ÏõêÏû•</a>
            {date && (
              <>
                <span class="text-gray-300">¬∑</span>
                <time datetime={date.toISOString()}>
                  {date.toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' })}
                </time>
              </>
            )}
            {readingTime && (
              <>
                <span class="text-gray-300">¬∑</span>
                <span>{readingTime}Î∂Ñ ÏùΩÍ∏∞</span>
              </>
            )}
          </div>
        </div>
      </header>

      <div class="lg:grid lg:grid-cols-[minmax(0,3fr)_220px] lg:gap-12">
        <!-- Î≥∏Î¨∏ -->
        <div>
          <div class="post-content">
            <slot />
          </div>

          <!-- Í≥µÏú† -->
          <div class="mt-12 pt-8 border-t border-gray-200">
            <p class="text-sm font-semibold text-gray-500 mb-3">Í≥µÏú†ÌïòÍ∏∞</p>
            <div class="flex items-center gap-3">
              <button
                id="share-native"
                class="hidden items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium bg-brand text-white hover:brightness-95 transition-all"
              >
                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/></svg>
                Í≥µÏú†ÌïòÍ∏∞
              </button>
              <button
                id="share-copy"
                class="inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-all"
              >
                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
                <span id="copy-label">ÎßÅÌÅ¨ Î≥µÏÇ¨</span>
              </button>
            </div>
          </div>

          <!-- Í¥ÄÎ†® Í∏Ä Ï∂îÏ≤ú -->
          {relatedPosts.length > 0 && (
            <div class="mt-12 pt-8 border-t border-gray-200">
              <h2 class="text-lg font-bold text-gray-900 mb-6">Ìï®Íªò ÏùΩÏúºÎ©¥ Ï¢ãÏùÄ Í∏Ä</h2>
              <div class="flex flex-col sm:grid sm:grid-cols-3 gap-6 sm:gap-4">
                {relatedPosts.map((rp) => (
                  <a href={`/posts/${rp.slug}/`} class="group bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all hover:-translate-y-0.5 border border-gray-100 flex flex-row sm:flex-col">
                    <div class="hidden sm:block aspect-[16/10] bg-gradient-to-br from-teal-50 to-cyan-50 overflow-hidden">
                      {rp.image ? (
                        <img src={rp.image} alt={rp.title} loading="lazy" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" />
                      ) : (
                        <div class="w-full h-full flex items-center justify-center text-4xl">üìù</div>
                      )}
                    </div>
                    <div class="p-5 sm:p-4 flex flex-col justify-center flex-1 min-w-0">
                      <div class="flex items-center gap-3 mb-3 flex-wrap">
                        {rp.category && (
                          <span class="bg-brand/10 text-brand px-3 py-0.5 rounded-full text-xs font-semibold">{rp.category}</span>
                        )}
                        {rp.date && (
                          <span class="text-xs text-gray-400">{rp.date.toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' })}</span>
                        )}
                        {rp.readingTime && (
                          <span class="text-xs text-gray-400">{rp.readingTime}Î∂Ñ ÏùΩÍ∏∞</span>
                        )}
                      </div>
                      <h3 class="text-lg sm:text-sm font-bold text-gray-900 mb-2 sm:mb-0 group-hover:text-brand transition-colors leading-snug line-clamp-2">{rp.title}</h3>
                      {rp.excerpt && (
                        <p class="text-gray-500 text-sm sm:text-xs mt-0 sm:mt-1.5 leading-relaxed line-clamp-2">{rp.excerpt}</p>
                      )}
                      <div class="flex items-center text-brand font-semibold mt-3 sm:mt-2 text-sm sm:text-xs group-hover:gap-2 transition-all">
                        <span>Îçî ÏùΩÍ∏∞ ‚Üí</span>
                      </div>
                    </div>
                  </a>
                ))}
              </div>
            </div>
          )}

          <!-- Ïù¥Ï†Ñ/Îã§Ïùå Í∏Ä -->
          <nav class="mt-12 pt-8 border-t border-gray-200">
            <div class="grid grid-cols-2 gap-4">
              {prevPost ? (
                <a href={`/posts/${prevPost.slug}/`} class="group flex flex-col p-4 rounded-xl border border-gray-100 hover:border-brand/40 hover:shadow-md transition-all">
                  <span class="text-xs text-gray-400 mb-1">‚Üê Ïù¥Ï†Ñ Í∏Ä</span>
                  <span class="text-sm font-semibold text-gray-700 group-hover:text-brand transition-colors line-clamp-2 leading-snug">{prevPost.title}</span>
                </a>
              ) : <div />}
              {nextPost ? (
                <a href={`/posts/${nextPost.slug}/`} class="group flex flex-col items-end text-right p-4 rounded-xl border border-gray-100 hover:border-brand/40 hover:shadow-md transition-all">
                  <span class="text-xs text-gray-400 mb-1">Îã§Ïùå Í∏Ä ‚Üí</span>
                  <span class="text-sm font-semibold text-gray-700 group-hover:text-brand transition-colors line-clamp-2 leading-snug">{nextPost.title}</span>
                </a>
              ) : <div />}
            </div>
            <div class="mt-6 text-center">
              <a href="/posts/" class="inline-flex items-center gap-2 text-sm text-gray-400 hover:text-brand font-medium transition-colors">
                Î™®Îì† Í∏Ä Î≥¥Í∏∞
              </a>
            </div>
          </nav>
        </div>

        <!-- Î™©Ï∞® (Îç∞Ïä§ÌÅ¨ÌÜ±) -->
        <aside class="hidden lg:block">
          <nav id="toc" class="sticky top-24">
            <p class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-3">Î™©Ï∞®</p>
            <ul id="toc-list" class="space-y-1.5 text-[0.8rem] leading-snug border-l-2 border-gray-100 pl-3">
            </ul>
          </nav>
        </aside>

        <!-- Î™®Î∞îÏùº Î™©Ï∞® Ï†úÍ±∞Îê® -->
      </div>
    </div>
  </article>

  <!-- Îß® ÏúÑÎ°ú Î≤ÑÌäº -->
  <button
    id="back-to-top"
    class="fixed bottom-6 right-6 z-50 w-11 h-11 rounded-full bg-white border border-gray-200 shadow-lg flex items-center justify-center text-gray-500 hover:text-brand hover:border-brand transition-all opacity-0 pointer-events-none"
    aria-label="Îß® ÏúÑÎ°ú"
  >
    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/></svg>
  </button>

  <script>
    (function initProgress() {
      const bar = document.getElementById('reading-progress');
      if (!bar) return;
      const update = () => {
        const h = document.documentElement.scrollHeight - window.innerHeight;
        bar.style.width = h > 0 ? `${Math.min(100, (window.scrollY / h) * 100)}%` : '0%';
      };
      window.addEventListener('scroll', update, { passive: true });
      update();
    })();
  </script>

  <script>
    (function initBackToTop() {
      const btn = document.getElementById('back-to-top');
      if (!btn) return;
      const toggle = () => {
        if (window.scrollY > 300) {
          btn.classList.remove('opacity-0', 'pointer-events-none');
          btn.classList.add('opacity-100');
        } else {
          btn.classList.add('opacity-0', 'pointer-events-none');
          btn.classList.remove('opacity-100');
        }
      };
      window.addEventListener('scroll', toggle, { passive: true });
      btn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
    })();
  </script>

  <script>
    (function initShare() {
      const copyBtn = document.getElementById('share-copy');
      const copyLabel = document.getElementById('copy-label');
      if (copyBtn) {
        copyBtn.addEventListener('click', async () => {
          try {
            await navigator.clipboard.writeText(window.location.href);
            if (copyLabel) { copyLabel.textContent = 'Î≥µÏÇ¨ ÏôÑÎ£å!'; setTimeout(() => { copyLabel.textContent = 'ÎßÅÌÅ¨ Î≥µÏÇ¨'; }, 2000); }
          } catch { /* fallback */ }
        });
      }

      const nativeBtn = document.getElementById('share-native');
      if (navigator.share && nativeBtn) {
        nativeBtn.classList.remove('hidden');
        nativeBtn.classList.add('inline-flex');
        nativeBtn.addEventListener('click', () => {
          navigator.share({
            title: document.title,
            text: document.querySelector('meta[name="description"]')?.getAttribute('content') || '',
            url: window.location.href,
          }).catch(() => {});
        });
      }
    })();
  </script>

  <script>
    function buildTOC() {
      const content = document.querySelector('.post-content');
      const tocList = document.getElementById('toc-list');
      const mobileTocList = document.getElementById('mobile-toc-list');
      const mobileTocNav = document.getElementById('mobile-toc');
      if (!content || !tocList) return;

      const headings: { el: Element; text: string; level: number }[] = [];

      content.querySelectorAll('h2, h3').forEach((el) => {
        const text = el.textContent?.trim();
        if (!text) return;
        if (!el.id) el.id = text.replace(/\s+/g, '-').replace(/[^\wÍ∞Ä-Ìû£-]/g, '').toLowerCase() || `heading-${headings.length}`;
        headings.push({ el, text, level: el.tagName === 'H2' ? 2 : 3 });
      });

      content.querySelectorAll('.se-fs-fs19').forEach((el) => {
        const text = el.textContent?.trim();
        if (!text || text === '\u200B') return;
        const parent = el.closest('.se-text-paragraph') || el.parentElement;
        if (!parent) return;
        if (!parent.id) parent.id = text.replace(/\s+/g, '-').replace(/[^\wÍ∞Ä-Ìû£-]/g, '').toLowerCase() || `heading-${headings.length}`;
        headings.push({ el: parent, text, level: 2 });
      });

      if (headings.length === 0) {
        const toc = document.getElementById('toc');
        if (toc) toc.style.display = 'none';
        if (mobileTocNav) mobileTocNav.style.display = 'none';
        return;
      }

      headings.forEach(({ el, text, level }) => {
        const li = document.createElement('li');
        const a = document.createElement('a');
        const targetId = (el.closest('.se-text-paragraph') || el).id || el.id;
        a.href = `#${targetId}`;
        a.textContent = text.replace(/^[\s\u200B]*[^\wÍ∞Ä-Ìû£\s]*\s*/, '').substring(0, 30) || text.substring(0, 30);
        a.className = `block py-1 text-gray-400 hover:text-brand transition-colors truncate ${level === 3 ? 'pl-3' : ''}`;
        a.dataset.tocTarget = targetId;
        li.appendChild(a);
        tocList.appendChild(li);

        const mobileDots = document.getElementById('mobile-toc-dots');
        if (mobileDots && level === 2) {
          const dot = document.createElement('button');
          const label = text.replace(/^[\s\u200B]*[^\wÍ∞Ä-Ìû£\s]*\s*/, '').substring(0, 12) || text.substring(0, 12);
          dot.className = 'mobile-toc-item group relative w-2 h-2 rounded-full bg-gray-300/40 transition-all duration-300 hover:scale-150';
          dot.dataset.tocTarget = targetId;
          dot.setAttribute('aria-label', label);
          dot.addEventListener('click', () => {
            document.getElementById(targetId)?.scrollIntoView({ behavior: 'smooth', block: 'start' });
          });

          const tooltip = document.createElement('span');
          tooltip.textContent = label;
          tooltip.className = 'absolute right-5 top-1/2 -translate-y-1/2 whitespace-nowrap text-[11px] font-medium text-gray-600 bg-white/90 backdrop-blur-sm px-2.5 py-1 rounded-lg shadow-sm border border-gray-100 opacity-0 pointer-events-none group-hover:opacity-100 transition-opacity duration-200';
          dot.appendChild(tooltip);

          mobileDots.appendChild(dot);
        }
      });

      const mDots = document.getElementById('mobile-toc-dots');
      if (mobileTocNav && mDots && mDots.children.length > 0) {
        let hideTimer: ReturnType<typeof setTimeout>;
        const show = () => {
          mobileTocNav.classList.remove('opacity-0', 'pointer-events-none');
          mobileTocNav.classList.add('opacity-100');
        };
        const fadeOut = () => {
          clearTimeout(hideTimer);
          hideTimer = setTimeout(() => {
            mobileTocNav.classList.remove('opacity-100');
            mobileTocNav.classList.add('opacity-0', 'pointer-events-none');
          }, 3000);
        };
        window.addEventListener('scroll', () => {
          if (window.scrollY > 300) { show(); fadeOut(); }
          else { mobileTocNav.classList.add('opacity-0', 'pointer-events-none'); mobileTocNav.classList.remove('opacity-100'); }
        }, { passive: true });
        mobileTocNav.addEventListener('pointerenter', () => { clearTimeout(hideTimer); show(); });
        mobileTocNav.addEventListener('pointerleave', fadeOut);
      }

      const allTocLinks = document.querySelectorAll('a[data-toc-target]');
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              allTocLinks.forEach((l) => {
                l.classList.remove('text-brand', 'font-semibold');
                if (l.classList.contains('mobile-toc-item')) {
                  l.classList.remove('!bg-brand', 'w-3', 'h-3');
                  l.classList.add('bg-gray-300/40', 'w-2', 'h-2');
                }
              });
              document.querySelectorAll(`[data-toc-target="${entry.target.id}"]`).forEach((active) => {
                if (active.classList.contains('mobile-toc-item')) {
                  active.classList.remove('bg-gray-300/40', 'w-2', 'h-2');
                  active.classList.add('!bg-brand', 'w-3', 'h-3');
                } else {
                  active.classList.remove('text-gray-400');
                  active.classList.add('text-brand', 'font-semibold');
                }
              });
            }
          });
        },
        { rootMargin: '-80px 0px -60% 0px', threshold: 0 }
      );

      headings.forEach(({ el }) => {
        const target = el.closest('.se-text-paragraph') || el;
        if (target.id) observer.observe(target);
      });
    }

    buildTOC();
  </script>

  <style is:global>
    .post-content {
      font-size: 1.05rem;
      line-height: 1.9;
      color: #334155;
      word-break: keep-all;
      overflow-wrap: break-word;
    }

    /* ===== ÎÑ§Ïù¥Î≤Ñ Î∏îÎ°úÍ∑∏ HTML Ïò§Î≤ÑÎùºÏù¥Îìú ===== */

    .post-content .naver-post,
    .post-content .se-main-container {
      max-width: 100%;
    }

    .post-content .se-component {
      margin-bottom: 0;
    }

    .post-content .se-text-paragraph {
      margin: 0;
      padding: 0;
      font-family: inherit !important;
      font-size: 1.05rem !important;
      line-height: 1.9 !important;
      color: #334155 !important;
    }

    .post-content .se-text-paragraph-align-center {
      text-align: center;
    }

    .post-content .se-fs-fs16 {
      font-size: 1.05rem !important;
    }

    /* Îπà Ï§Ñ (‚Äã zero-width space) ÎÜíÏù¥ Ï∂ïÏÜå */
    .post-content .se-text-paragraph:only-child span:only-child:empty,
    .post-content .se-text-paragraph span[style=""]:only-child {
      display: block;
      line-height: 0.8;
    }

    /* ÏÜåÏ†úÎ™© (ÎÑ§Ïù¥Î≤Ñ fs19) */
    .post-content .se-fs-fs19 {
      font-size: 1.4rem !important;
      font-weight: 800 !important;
      color: #0f172a !important;
      letter-spacing: -0.02em;
    }

    .post-content .se-text-paragraph:has(.se-fs-fs19) {
      margin-top: 1rem !important;
      margin-bottom: 0.25rem !important;
      padding: 0.6rem 0;
    }

    .post-content .se-ff-nanummyeongjo {
      font-family: inherit !important;
    }

    /* Ïù∏ÎùºÏù∏ color Ïò§Î≤ÑÎùºÏù¥Îìú */
    .post-content .se-text-paragraph span[style*="color:#000000"] {
      color: #334155 !important;
    }

    /* ===== Ïù¥ÎØ∏ÏßÄ - ÌôïÏã§Ìïú Í∞ÄÏö¥Îç∞ Ï†ïÎ†¨ ===== */

    .post-content .se-component.se-image {
      display: flex;
      justify-content: center;
    }

    .post-content .se-component-content {
      width: 100%;
    }

    .post-content .se-section-image {
      display: flex;
      flex-direction: column;
      align-items: center;
      max-width: 480px !important;
      margin: 2rem auto !important;
    }

    .post-content .se-module-image {
      display: flex;
      justify-content: center;
      width: 100%;
    }

    .post-content .se-image-resource {
      max-width: 100%;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 2px 16px rgba(0,0,0,0.07);
      display: block;
      margin: 0 auto;
    }

    .post-content .se-module-image-link {
      display: block;
      cursor: default;
      text-align: center;
    }

    /* Ï∫°ÏÖò */
    .post-content .se-caption {
      text-align: left;
      margin-top: 0.75rem;
      margin-bottom: 0;
      width: 100%;
    }

    .post-content .se-caption p {
      font-size: 0.8rem !important;
      color: #94a3b8 !important;
      line-height: 1.8 !important;
      text-align: left !important;
    }

    .post-content .se-caption a {
      color: #94a3b8 !important;
      font-size: 0.75rem;
    }

    /* Íµ¨Î∂ÑÏÑ† */
    .post-content .se-hr {
      border: none;
      border-top: 1px solid #e2e8f0;
      margin: 2.5rem 0;
    }

    /* OG ÎßÅÌÅ¨ Ïπ¥Îìú ‚Äî ÎØ∏ÎãàÎ©Ä */
    .post-content .se-oglink-thumbnail {
      display: none;
    }

    .post-content .se-oglink-info {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 0.6rem 1rem;
      margin: 0.5rem auto;
      max-width: 480px;
      text-decoration: none;
      transition: all 0.2s;
      background: #f8fafc;
    }

    .post-content .se-oglink-info::before {
      content: 'üîó';
      font-size: 0.85rem;
      flex-shrink: 0;
    }

    .post-content .se-oglink-info:hover {
      border-color: #3FB8D3;
      background: #f0fdfa;
    }

    .post-content .se-oglink-info-container {
      display: flex;
      align-items: center;
    }

    .post-content .se-oglink-title {
      font-size: 0.88rem;
      font-weight: 600;
      color: #334155;
      margin: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .post-content .se-oglink-summary,
    .post-content .se-oglink-url {
      display: none;
    }

    .post-content .se-section-oglink {
      display: flex;
      justify-content: center;
    }

    /* ÌïòÏù¥ÎùºÏù¥Ìä∏ ÌÖçÏä§Ìä∏ */
    .post-content [style*="background-color:#ffef34"] {
      background: linear-gradient(transparent 55%, #fef08a 55%) !important;
      padding: 0 3px;
    }

    /* Î∞ëÏ§Ñ + ÍµµÏùÄ Í∞ïÏ°∞ */
    .post-content u b,
    .post-content b u {
      text-decoration: none;
      background: linear-gradient(transparent 85%, #3FB8D3 85%);
      padding-bottom: 2px;
    }

    /* ===== ÏùºÎ∞ò ÎßàÌÅ¨Îã§Ïö¥ ÏΩòÌÖêÏ∏† ===== */

    .post-content p {
      margin: 0;
      padding: 0;
      text-align: center;
    }

    .post-content h2 {
      font-size: 1.4rem !important;
      font-weight: 800 !important;
      color: #0f172a !important;
      margin-top: 1rem !important;
      margin-bottom: 0.25rem !important;
      padding: 0.6rem 0;
      text-align: center;
      letter-spacing: -0.02em;
      border-bottom: none;
    }

    .post-content h3 {
      font-size: 1.15rem;
      font-weight: 700;
      color: #0f172a;
      margin-top: 1rem;
      margin-bottom: 0.25rem;
      text-align: center;
    }

    .post-content ul, .post-content ol {
      padding-left: 1.5rem;
      margin-bottom: 0.15rem;
      text-align: left;
    }

    .post-content li {
      margin-bottom: 0.15rem;
    }

    .post-content a {
      color: #3FB8D3;
      text-decoration: underline;
      text-underline-offset: 3px;
      text-decoration-color: rgba(76,189,196,0.3);
    }

    .post-content a:hover {
      color: #2DA3BD;
      text-decoration-color: #2DA3BD;
    }

    /* bold ÏÉâÏÉÅ: ÎÑ§Ïù¥Î≤Ñ HTMLÍ≥º ÎèôÏùº (#334155) */
    .post-content strong {
      color: #334155;
    }

    .post-content blockquote {
      border-left: 3px solid #3FB8D3;
      color: #64748b;
      font-style: italic;
      margin: 0.75rem auto;
      max-width: 480px;
      background: #f8fafc;
      padding: 1rem 1.25rem;
      border-radius: 0 8px 8px 0;
      text-align: center;
    }

    .post-content blockquote p {
      margin: 0;
    }

    /* Ïù¥ÎØ∏ÏßÄ: ÌÅ¨Í∏∞ Ï†úÌïú + Í∞ÄÏö¥Îç∞ Ï†ïÎ†¨ (Í∏∞Ï°¥ ÎÑ§Ïù¥Î≤Ñ Í∏ÄÍ≥º ÎèôÏùº 480px) */
    .post-content img {
      max-width: 480px;
      width: 100%;
      height: auto;
      border-radius: 12px;
      display: block;
      margin: 0 auto;
      box-shadow: 0 2px 16px rgba(0,0,0,0.07);
    }

    .post-content p:has(> img:only-child) {
      text-align: center;
      margin: 2rem 0 0;
      padding: 0;
    }

    /* Ïù¥ÎØ∏ÏßÄ Î∞îÎ°ú ÏïÑÎûò Ï∫°ÏÖò ÌÖçÏä§Ìä∏: ÎÑ§Ïù¥Î≤Ñ .se-captionÍ≥º ÎèôÏùº */
    .post-content p:has(> img) + p:not(:has(img)) {
      font-size: 0.8rem !important;
      color: #94a3b8 !important;
      text-align: left !important;
      line-height: 1.8 !important;
      margin-top: 0.75rem !important;
      margin-bottom: 0 !important;
      max-width: 480px;
      margin-left: auto !important;
      margin-right: auto !important;
    }

    /* Ï∫°ÏÖò ÏïàÏùò ÎßÅÌÅ¨ÎèÑ ÌöåÏÉâÏúºÎ°ú: ÎÑ§Ïù¥Î≤Ñ .se-caption aÏôÄ ÎèôÏùº */
    .post-content p:has(> img) + p a {
      color: #94a3b8 !important;
      font-size: 0.75rem;
    }

    .post-content hr {
      border: none;
      border-top: 1px solid #e2e8f0;
      margin: 2.5rem 0;
    }

    /* ÎÑ§Ïù¥Î≤Ñ Î∏îÎ°úÍ∑∏ ÎßÅÌÅ¨ Ïπ¥Îìú (Í∏∞Ï°¥ se-oglink-infoÏôÄ ÎèôÏùº) */
    .post-content .naver-link-card {
      display: block;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 1rem 1.25rem;
      margin: 0.75rem auto;
      max-width: 480px;
      text-decoration: none !important;
      transition: all 0.2s;
      background: #f8fafc;
      text-align: left;
    }

    .post-content .naver-link-card:hover {
      border-color: #3FB8D3;
      box-shadow: 0 2px 12px rgba(63,184,211,0.1);
    }

    .post-content .naver-link-card strong {
      display: block;
      font-size: 0.95rem;
      font-weight: 700;
      color: #1e293b;
      margin-bottom: 0.25rem;
    }

    .post-content .naver-link-summary {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      font-size: 0.82rem;
      color: #64748b;
      margin: 0;
    }

    .post-content .naver-link-url {
      display: block;
      font-size: 0.75rem;
      color: #94a3b8;
      margin-top: 0.3rem;
    }
  </style>
</BaseLayout>
